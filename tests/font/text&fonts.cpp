#include <iostream>
#include <bitset> // NON FUNZIONANO I BITSET PER DESCRIVERE I FONT. DICE CHE SONO TROPPI BIT PER ENTRARE IN UN INT...
#include <vector>
#include <string>

#include "../../include/Image.hpp"
#include "ZX_Spectrum_16x16.h"

using namespace std;


struct font {
	int height = 16; //height of the current font in pixels
	int width  = 16; //length of current pixels (PUO` CAMBIARE?, non credo...)
	int N = 96; //number of characters (16*6)
	vector<string> data = {
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000001100001100000000110000111111111111000011111111111100001100000000110000110000000011000011000000001100001100000000110000000000000000000000000000000000", // A
		"0000000000000000000000000000000000111111111100000011111111110000001100000000110000110000000011000011111111110000001111111111000000110000000011000011000000001100001100000000110000110000000011000011111111110000001111111111000000000000000000000000000000000000", // B
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000000000001100000000000000110000000000000011000000000000001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // C
		"0000000000000000000000000000000000111111110000000011111111000000001100000011000000110000001100000011000000001100001100000000110000110000000011000011000000001100001100000011000000110000001100000011111111000000001111111100000000000000000000000000000000000000", // D
		"0000000000000000000000000000000000111111111111000011111111111100001100000000000000110000000000000011111111110000001111111111000000110000000000000011000000000000001100000000000000110000000000000011111111111100001111111111110000000000000000000000000000000000", // E
		"0000000000000000000000000000000000111111111111000011111111111100001100000000000000110000000000000011111111110000001111111111000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000000000000000000000000000000000", // F
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000000000001100000000000000110000111111000011000011111100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // G
		"0000000000000000000000000000000000110000000011000011000000001100001100000000110000110000000011000011111111111100001111111111110000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000000000000000000000000000000000", // H
		"0000000000000000000000000000000000001111111111000000111111111100000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000111111111100000011111111110000000000000000000000000000000000", // I
		"0000000000000000000000000000000000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000110000000011000011000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // J
		"0000000000000000000000000000000000110000001100000011000000110000001100001100000000110000110000000011111100000000001111110000000000110000110000000011000011000000001100000011000000110000001100000011000000001100001100000000110000000000000000000000000000000000", // K
		"0000000000000000000000000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011111111111100001111111111110000000000000000000000000000000000", // L
		"0000000000000000000000000000000000110000000011000011000000001100001111000011110000111100001111000011001111001100001100111100110000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000000000000000000000000000000000", // M
		"0000000000000000000000000000000000110000000011000011000000001100001111000000110000111100000011000011001100001100001100110000110000110000110011000011000011001100001100000011110000110000001111000011000000001100001100000000110000000000000000000000000000000000", // N
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // O
		"0000000000000000000000000000000000111111111100000011111111110000001100000000110000110000000011000011000000001100001100000000110000111111111100000011111111110000001100000000000000110000000000000011000000000000001100000000000000000000000000000000000000000000", // P
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000001100001100000000110000110011000011000011001100001100001100001100110000110000110011000000111111110000000011111111000000000000000000000000000000000000", // Q
		"0000000000000000000000000000000000111111111100000011111111110000001100000000110000110000000011000011000000001100001100000000110000111111111100000011111111110000001100000011000000110000001100000011000000001100001100000000110000000000000000000000000000000000", // R
		"0000000000000000000000000000000000001111111100000000111111110000001100000000000000110000000000000000111111110000000011111111000000000000000011000000000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // S
		"0000000000000000000000000000000011111111111111001111111111111100000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000000000000000000000000000000", // T
		"0000000000000000000000000000000000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // U
		"0000000000000000000000000000000000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000110000000011000011000000001100000011000011000000001100001100000000001111000000000000111100000000000000000000000000000000000000", // V
		"0000000000000000000000000000000000110000000011000011000000001100001100000000110000110000000011000011000000001100001100000000110000110000000011000011000000001100001100111100110000110011110011000000110000110000000011000011000000000000000000000000000000000000", // W
		"0000000000000000000000000000000000110000000011000011000000001100000011000011000000001100001100000000001111000000000000111100000000000011110000000000001111000000000011000011000000001100001100000011000000001100001100000000110000000000000000000000000000000000", // X
		"0000000000000000000000000000000011000000000011001100000000001100001100000011000000110000001100000000110011000000000011001100000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000000000000000000000000000000", // Y
		"0000000000000000000000000000000000111111111111000011111111111100000000000011000000000000001100000000000011000000000000001100000000000011000000000000001100000000000011000000000000001100000000000011111111111100001111111111110000000000000000000000000000000000", // Z
		
		"0000000000000000000000000000000000000000000000000000000000000000000001111100000000000111110000000000000000110000000000000011000000001111111100000000111111110000001100000011000000110000001100000000111111110000000011111111000000000000000000000000000000000000", // a
		"0000000000000000000000000000000000001100000000000000110000000000000011000000000000001100000000000000111111110000000011111111000000001100000011000000110000001100000011000000110000001100000011000000111111110000000011111111000000000000000000000000000000000000", // b
		"0000000000000000000000000000000000000000000000000000000000000000000000111111000000000011111100000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000001111110000000000111111000000000000000000000000000000000000", // c
		"0000000000000000000000000000000000000000001100000000000000110000000000000011000000000000001100000000111111110000000011111111000000110000001100000011000000110000001100000011000000110000001100000000111111110000000011111111000000000000000000000000000000000000", // d
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000001111110000000011000000110000001100000011000000111111110000000011111111000000001100000000000000110000000000000000111111110000000011111111000000000000000000000000000000000000", // d
		"0000000000000000000000000000000000000000111100000000000011110000000000110000000000000011000000000000001111000000000000111100000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000000000000000000000000000000", // f
		"0000000000000000000000000000000000000000000000000000000000000000000011111111000000001111111100000011000000110000001100000011000000110000001100000011000000110000000011111111000000001111111100000000000000110000000000000011000000001111110000000000111111000000", // g
		"0000000000000000000000000000000000110000000000000011000000000000001100000000000000110000000000000011111111000000001111111100000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000000000000000000000000000000000", // h
		"0000000000000000000000000000000000000011000000000000001100000000000000000000000000000000000000000000111100000000000011110000000000000011000000000000001100000000000000110000000000000011000000000000111111000000000011111100000000000000000000000000000000000000", // i
		"0000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000000000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000110000110000000011000011000000000011110000000000001111000000", // j
		"0000000000000000000000000000000000001100000000000000110000000000000011001100000000001100110000000000111100000000000011110000000000001111000000000000111100000000000011001100000000001100110000000000110000110000000011000011000000000000000000000000000000000000", // k
		"0000000000000000000000000000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000000011110000000000001111000000000000000000000000000000000000", // l
		"0000000000000000000000000000000000000000000000000000000000000000001111001100000000111100110000000011001100110000001100110011000000110011001100000011001100110000001100110011000000110011001100000011001100110000001100110011000000000000000000000000000000000000", // m
		"0000000000000000000000000000000000000000000000000000000000000000001111111100000000111111110000000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000000000000000000000000000000000", // n
		"0000000000000000000000000000000000000000000000000000000000000000000011111100000000001111110000000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000000111111000000000011111100000000000000000000000000000000000000", // o
		"0000000000000000000000000000000000000000000000000000000000000000001111111100000000111111110000000011000000110000001100000011000000110000001100000011000000110000001111111100000000111111110000000011000000000000001100000000000000110000000000000011000000000000", // p
		"0000000000000000000000000000000000000000000000000000000000000000000011111111000000001111111100000011000000110000001100000011000000110000001100000011000000110000000011111111000000001111111100000000000000110000000000000011000000000000001111000000000000111100", // q
		"0000000000000000000000000000000000000000000000000000000000000000000000111111000000000011111100000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000000000000000000000000000000000", // r
		"0000000000000000000000000000000000000000000000000000000000000000000011111100000000001111110000000011000000000000001100000000000000001111110000000000111111000000000000000011000000000000001100000011111111000000001111111100000000000000000000000000000000000000", // s
		"0000000000000000000000000000000000000011000000000000001100000000000011111100000000001111110000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000000011110000000000001111000000000000000000000000000000000000", // t
		"0000000000000000000000000000000000000000000000000000000000000000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000001100000000111111000000000011111100000000000000000000000000000000000000", // u
		"0000000000000000000000000000000000000000000000000000000000000000001100000011000000110000001100000011000000110000001100000011000000001100110000000000110011000000000011001100000000001100110000000000001100000000000000110000000000000000000000000000000000000000", // v
		"0000000000000000000000000000000000000000000000000000000000000000001100000011000000110000001100000011001100110000001100110011000000110011001100000011001100110000001100110011000000110011001100000000110011000000000011001100000000000000000000000000000000000000", // w
		"0000000000000000000000000000000000000000000000000000000000000000001100000011000000110000001100000000110011000000000011001100000000000011000000000000001100000000000011001100000000001100110000000011000000110000001100000011000000000000000000000000000000000000", // x
		"0000000000000000000000000000000000000000000000000000000000000000001100000011000000110000001100000011000000110000001100000011000000110000001100000011000000110000000011111111000000001111111100000000000000110000000000000011000000001111110000000000111111000000", // y
		"0000000000000000000000000000000000000000000000000000000000000000001111111111000000111111111100000000000011000000000000001100000000000011000000000000001100000000000011000000000000001100000000000011111111110000001111111111000000000000000000000000000000000000", // z
		
		"0000000000000000000000000000000000001111111100000000111111110000001100000011110000110000001111000011000011001100001100001100110000110011000011000011001100001100001111000000110000111100000011000000111111110000000011111111000000000000000000000000000000000000", // 0
		"0000000000000000000000000000000000000011110000000000001111000000000011001100000000001100110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000111111111100000011111111110000000000000000000000000000000000", // 1
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000000000000001100000000000000110000001111111100000000111111110000001100000000000000110000000000000011111111111100001111111111110000000000000000000000000000000000", // 2
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000000000011110000000000001111000000000000000011000000000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // 3
		"0000000000000000000000000000000000000000110000000000000011000000000000111100000000000011110000000000110011000000000011001100000000110000110000000011000011000000001111111111110000111111111111000000000011000000000000001100000000000000000000000000000000000000", // 4
		"0000000000000000000000000000000000111111111111000011111111111100001100000000000000110000000000000011111111110000001111111111000000000000000011000000000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // 5
		"0000000000000000000000000000000000001111111100000000111111110000001100000000000000110000000000000011111111110000001111111111000000110000000011000011000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // 6
		"0000000000000000000000000000000000111111111111000011111111111100000000000000110000000000000011000000000000110000000000000011000000000000110000000000000011000000000000110000000000000011000000000000001100000000000000110000000000000000000000000000000000000000", // 7
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000000111111110000000011111111000000110000000011000011000000001100001100000000110000110000000011000000111111110000000011111111000000000000000000000000000000000000", // 8
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000011000000001100001100000000110000001111111111000000111111111100000000000000110000000000000011000000111111110000000011111111000000000000000000000000000000000000", // 9
		
		
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", // <space>
		"0000000000000000000000000000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000000000000", // !
		"0000000000000000000000000000000000001100001100000000110000110000000011000011000000001100001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", // "
		"0000000000000000000000000000000000001100001100000000110000110000001111111111110000111111111111000000110000110000000011000011000000001100001100000000110000110000001111111111110000111111111111000000110000110000000011000011000000000000000000000000000000000000", // #
		"0000000000000000000000000000000000000000110000000000000011000000000011111111110000001111111111000000110011000000000011001100000000001111111111000000111111111100000000001100110000000000110011000000111111111100000011111111110000000000110000000000000011000000", // $
		"0000000000000000000000000000000000111100000011000011110000001100001111000011000000111100001100000000000011000000000000001100000000000011000000000000001100000000000011000011110000001100001111000011000000111100001100000011110000000000000000000000000000000000", // %
		"0000000000000000000000000000000000000011000000000000001100000000000011001100000000001100110000000000001100000000000000110000000000001100110011000000110011001100001100000011000000110000001100000000111111001100000011111100110000000000000000000000000000000000", // &
		"0000000000000000000000000000000000000000110000000000000011000000000000110000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", // '
		"0000000000000000000000000000000000000000001100000000000000110000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000000110000000000000011000000000000000000000000000000000000", // (
		"0000000000000000000000000000000000001100000000000000110000000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000110000000000000011000000000000000000000000000000000000000000", // )
		"0000000000000000000000000000000000000000000000000000000000000000000000110011000000000011001100000000000011000000000000001100000000001111111111000000111111111100000000001100000000000000110000000000001100110000000000110011000000000000000000000000000000000000", // *
		"0000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000011000000000000001100000000001111111111000000111111111100000000001100000000000000110000000000000011000000000000001100000000000000000000000000000000000000", // +
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000011000000000000001100000000000011000000000000001100000000", // ,
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111000000111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", // -
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100000000000011110000000000001111000000000000111100000000000000000000000000000000000000", // .
		"0000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000011000000000000110000000000000011000000000000110000000000000011000000000000110000000000000011000000000000110000000000000011000000000000000000000000000000000000000000", // /
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000000000000", // :
		"0000000000000000000000000000000000000000000000000000000000000000000000110000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000011000000000000001100000000000000110000000000001100000000000000110000000000", // ;
		"0000000000000000000000000000000000000000000000000000000000000000000000000011000000000000001100000000000011000000000000001100000000000011000000000000001100000000000000001100000000000000110000000000000000110000000000000011000000000000000000000000000000000000", // <
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111100000011111111110000000000000000000000000000000000000011111111110000001111111111000000000000000000000000000000000000000000000000000000000000000000", // =
		"0000000000000000000000000000000000000000000000000000000000000000000000110000000000000011000000000000000011000000000000001100000000000000001100000000000000110000000000001100000000000000110000000000001100000000000000110000000000000000000000000000000000000000", // >
		"0000000000000000000000000000000000001111111100000000111111110000001100000000110000110000000011000000000000110000000000000011000000000000110000000000000011000000000000000000000000000000000000000000000011000000000000001100000000000000000000000000000000000000", // ?
		"0000000000000000000000000000000000001111111100000000111111110000001100001100110000110000110011000011001100111100001100110011110000110011111111000011001111111100001100000000000000110000000000000000111111110000000011111111000000000000000000000000000000000000", // @
		
		
		
		
	};
} BASIC; //16x16 pixels (ZX Spectrum font)




void print_font(Image &img, int x0, int y0, string text, font f);
void print_text(Image &img, int x0, int y0, string text, vector<string> font);


int main()
{
//	for(int i=0;i<6;i++) cout << BASIC.data[i]<< endl;
	
	font Consolas;
	Consolas.height = 4; //DEVO CAPIRE ANCORA COME FARE PER DEFINIRE ALTRI FONT OLTRE QUELLO BASIC...
	
	
	Image img(100,100);
	print_font(img, 0, 0, "abcdef\nghijkl\nmnopqr\nstuvwx\nyz", BASIC);
	print_text(img, 0, 0, "abcdef\nghijkl\nmnopqr\nstuvwx\nyz", ZX_Spectrum_16x16);
	img.save_bmp("text.bmp");
	
	return 0;
}


void print_font(Image &img, int x0, int y0, string text, font f)
{
	//prints ASCII chars from 32 (space) to 126 (tilde)
	int x=x0, y=y0; // top-right corner of first character
	for(int i=0; i<text.length(); i++){
		if(text[i] == '\n') {
			//new line and carriage return
			x = x0;
			y0 += f.height;
			y = y0;
			continue; //SOLUZIONE LEZZA E TEMPORANEA!! (per non far continuare con i cicli for)
		}
		if(text[i]<32 || text[i]>126) continue; //NON MI PIACE MOLTO USARE CONTINUE, MA FORSE E` L'UNICA SOLUZIONE
		for(int r=0; r<f.height; r++) for(int c=0; c<f.width; c++) if(f.data[text[i]-'a'][r*f.width+c] == '1') img.set_pixel(x+c, y+r, {255,255,255});
		x += f.width;
		y = y0;
	}
}

void print_text(Image &img, int x0, int y0, string text, vector<string> font)
{
	//prints ASCII chars from 32 (space) to 126 (tilde)
	int charWidth  = font[0][0];
	int charHeight = font[0][1];
	int x=x0, y=y0; // top-right corner of first character
	for(int i=0; i<text.length(); i++){
		if(text[i] == '\n') {
			//new line and carriage return
			x = x0;
			y0 += charHeight;
			y = y0;
			continue; //SOLUZIONE LEZZA E TEMPORANEA!! (per non far continuare con i cicli for)
		}
		if(text[i]<32 || text[i]>126) continue; //NON MI PIACE MOLTO USARE CONTINUE, MA FORSE E` L'UNICA SOLUZIONE
		for(int r=0; r<charHeight; r++) for(int c=0; c<charWidth; c++) if(font[text[i]-' '+1][r*charWidth+c] == '1') img.set_pixel(x+c, y+r, {255,0,0});
		x += charWidth;
		y = y0;
	}
}


